{% extends "blog/base.html" %}

{% load django_bootstrap5 %}

{% block title %}
    文章列表 - Django 大冒險
{% endblock title %}

{% block extra_head %}
    {% comment %}
    表引入預設的主題
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/tom-select@2.4.3/dist/css/tom-select.default.min.css"> {% endcomment %}
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/tom-select@2.4.3/dist/css/tom-select.bootstrap5.min.css">
{% endblock extra_head %}

{% block extra_scripts %}
    <script src="https://cdn.jsdelivr.net/npm/tom-select@2.4.3/dist/js/tom-select.complete.min.js"></script>

    <script>
        {% comment %} 撈取全部所指定的物件 {% endcomment %}
        document.querySelectorAll('select[multiple]').forEach((el) => {
            new TomSelect(el, {
                plugins: ['remove_button'],
                create: false,
                placeholder: '請選擇項目......',
            });
        });
    </script>
{% endblock extra_scripts %}

{% block blog_content %}
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>
            文章列表
        </h2>
        <a href="{% url 'blog:article_create' %}" class="btn btn-primary">
            建立文章
        </a>
    </div>

    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title">
                篩選條件
            </h5>
            <form method="get">
                {% comment %} filter.form是最標準的Django form {% endcomment %}
                {% bootstrap_form filter.form %}

                <div class="d-flex gap-2">
                    {% bootstrap_button button_type="submit" content="搜尋" %}
                    <a href="{% url 'blog:article_list' %}" class="btn btn-secondary">清除</a>
                </div>
            </form>
        </div>
    </div>

    <div class="row">
        {% comment %} filter.qs表經過過濾過後的資料 {% endcomment %}
        {% for article in filter.qs %}
            {% include "blog/components/article_card.html" %}
        {% empty %}
            <div class="col-12">
                <div class="alert alert-info">
                    沒有符合條件的文章
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock blog_content %}
